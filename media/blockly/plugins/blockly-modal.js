/*! For license information please see index.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("blockly/core"));else if("function"==typeof define&&define.amd)define(["blockly/core"],t);else{var o="object"==typeof exports?t(require("blockly/core")):t(e.Blockly);for(var l in o)("object"==typeof exports?exports:e)[l]=o[l]}}(this,e=>(()=>{"use strict";var t={370:t=>{t.exports=e}},o={};function l(e){var n=o[e];if(void 0!==n)return n.exports;var i=o[e]={exports:{}};return t[e](i,i.exports,l),i.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};l.r(n),l.d(n,{Modal:()=>s});var i=l(370);class s{constructor(e,t){this.title_=e,this.workspace_=t,this.lastFocusableEl_=null,this.firstFocusableEl_=null,this.htmlDiv_=null,this.boundEvents_=[],this.shouldCloseOnOverlayClick=!0,this.shouldCloseOnEsc=!0}init(){this.render()}dispose(){for(const e of this.boundEvents_)i.browserEvents.unbind(e);this.boundEvents_.length=0,this.htmlDiv_&&this.htmlDiv_.remove()}show(){i.WidgetDiv.show(this,this.workspace_.RTL,()=>this.widgetDispose_()),this.widgetCreate_();const e=this.htmlDiv_.querySelectorAll('a[href],area[href], input:not([disabled]), select:not([disabled]),textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');e.length>0&&(this.firstFocusableEl_=e[0],this.lastFocusableEl_=e[e.length-1],e[0].classList.contains("blocklyModalBtnClose")&&e.length>1?e[1].focus():this.firstFocusableEl_.focus())}hide(){i.WidgetDiv.hide()}onCancel_(){this.hide()}widgetCreate_(){const e=i.WidgetDiv.getDiv();i.utils.dom.addClass(this.htmlDiv_,"blocklyModalOpen"),e.appendChild(this.htmlDiv_)}widgetDispose_(){i.utils.dom.removeClass(this.htmlDiv_,"blocklyModalOpen")}handleBackwardTab_(e){document.activeElement===this.firstFocusableEl_&&(e.preventDefault(),this.lastFocusableEl_.focus())}handleForwardTab_(e){document.activeElement===this.lastFocusableEl_&&(e.preventDefault(),this.firstFocusableEl_.focus())}handleKeyDown_(e){if("Tab"===e.key){if(!this.firstFocusableEl_||this.firstFocusableEl_===this.lastFocusableEl_)return e.preventDefault(),void e.stopPropagation();e.shiftKey?this.handleBackwardTab_(e):this.handleForwardTab_(e)}else"Escape"===e.key&&this.shouldCloseOnEsc&&this.hide();e.stopPropagation()}addEvent_(e,t,o,l){const n=i.browserEvents.conditionalBind(e,t,o,l);this.boundEvents_.push(n)}render(){this.htmlDiv_=document.createElement("div"),this.htmlDiv_.className="blocklyModalOverlay";const e=document.createElement("div");e.className="blocklyModalContainer",e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby",this.title_),this.addEvent_(e,"keydown",this,this.handleKeyDown_),this.shouldCloseOnOverlayClick&&(this.addEvent_(this.htmlDiv_,"click",this,this.hide),this.addEvent_(e,"click",this,e=>{e.stopPropagation()}));const t=document.createElement("header");t.className="blocklyModalHeader",this.renderHeader_(t);const o=document.createElement("button");o.className="blocklyModalBtn blocklyModalBtnClose",this.addEvent_(o,"click",this,this.onCancel_),t.appendChild(o);const l=document.createElement("div");l.className="blocklyModalContent",this.renderContent_(l);const n=document.createElement("footer");n.className="blocklyModalFooter",this.renderFooter_(n),e.appendChild(t),e.appendChild(l),e.appendChild(n),this.htmlDiv_.appendChild(e)}renderHeader_(e){const t=document.createElement("h2");t.className="blocklyModalHeaderTitle",t.appendChild(document.createTextNode(this.title_)),e.appendChild(t)}renderContent_(e){}renderFooter_(e){}}return i.Css.register('\n.blocklyModalOverlay {\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  position: fixed;\n}\n.blocklyModalContainer {\n  background-color: #fff;\n  border: 1px solid gray;\n  font-family: Helvetica;\n  font-weight: 300;\n  padding: 1em;\n  width: 400px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  box-shadow: 0px 10px 20px grey;\n  z-index: 100;\n  margin: 15% auto;\n}\n.blocklyModalHeader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.blocklyModalHeaderTitle {\n  margin-top: 0;\n  margin-bottom: 0;\n  font-size: 1.2em;\n  line-height: 1.25;\n}\n.blocklyModalHeader .blocklyModalBtn {\n  margin-left: auto;\n  height: fit-content;\n}\n.blocklyModalBtnClose:before {\n  content: "\\2715";\n}\n.blocklyModalBtn {\n  margin-right: 0.5em;\n  border: 1px solid gray;\n  font-weight: 500;\n  color: gray;\n  border-radius: 25px;\n}\n.blocklyModalBtnPrimary {\n  background-color: gray;\n  color: #fff;\n}\n'),n})());
//# sourceMappingURL=index.js.map